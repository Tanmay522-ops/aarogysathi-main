
generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}


model User {
  id        String  @id @default(cuid())
  clerkId   String  @unique
  name      String
  email     String  @unique
  abhaId    String?  @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  patient Patient?

  @@map("users")
}




model Patient {
  id                      String  @id @default(cuid())
  userId                  String  @unique
  phone                   String
  birthDate               DateTime
  gender                  Gender
  address                 String
  occupation              String
  emergencyContactName    String
  emergencyContactNumber  String
  primaryPhysician        String
  allergies               String?
  currentMedication       String?
  familyMedicalHistory    String?
  pastMedicalHistory      String?
  insuranceProvider       String
  insurancePolicyNumber   String
  identificationType      String?
  identificationNumber    String?
  identificationDocumentUrl String?
  treatmentConsent        Boolean   @default(false)
  disclosureConsent       Boolean   @default(false)
  privacyConsent          Boolean   @default(false)
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("patients")
  @@index([primaryPhysician])
}


enum Gender {
  Male
  Female
  Other
}
